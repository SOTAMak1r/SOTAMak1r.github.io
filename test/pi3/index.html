<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi3</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒŒ</text></svg>">
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/PLYLoader.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;700&display=swap');
        @keyframes text-glow {
            0%, 100% {
                text-shadow: 0 0 10px #0ea5e9, 0 0 20px #0ea5e9, 0 0 30px #4f46e5, 0 0 40px #4f46e5;
            }
            50% {
                text-shadow: 0 0 5px #0ea5e9, 0 0 10px #0ea5e9, 0 0 15px #4f46e5, 0 0 20px #4f46e5;
            }
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        * {
            font-family: 'Orbitron', sans-serif;
        }
        body {
            /* font-family: 'Rajdhani', sans-serif; */
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(-45deg, #020617, #111827, #082f49, #4f46e5);
            background-size: 400% 400%;
            animation: gradient-animation 20s ease infinite;
            color: #9ca3af;
        }




        /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡æ•ˆæžœ */
        .group:hover .group-hover\:block {
            display: block !important;
            animation: fadeIn 0.2s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        
        .gradient-bg {
            position: relative;
            overflow: hidden; 
        }

        .background-video {
            position: absolute; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; 
            z-index: -1;      
        }

        @keyframes gradientAnim {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            50% { opacity: 0.2; }
        }

        .hover-3d {
            transition: transform 0.3s ease;
        }

        .hover-3d:hover {
            transform: translateY(-5px) rotateX(5deg);
        }

        .gradient-text {
            position: relative; 
            background-image: linear-gradient(to right, 
                rgba(68,116,195,0.8) 0%,
                rgba(96,139,229,0.8) 33%,
                rgba(111,134,234,0.8) 66%,
                rgba(96,110,205,0.8) 100%
            );
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .gradient-text::after {
            content: '3';
            position: absolute;
            top: -0.2em;
            right: -0.4em;
            font-size: 0.5em;
            display: inline-block;
            background-image: inherit;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
    </style>
</head>



<body class="font-sans antialiased">
    
    <nav id="main-nav" class="fixed top-0 left-0 right-0 w-full z-50 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <span class="text-2xl font-bold text-white" style="display: inline-block; color: transparent;
                    background-image: linear-gradient(120deg, #38bdf8, #818cf8, #c084fc);
                    -webkit-background-clip: text; background-clip: text;
                    text-shadow: 0 0 15px rgba(129, 140, 248, 0.5);">
                        &pi;Â³
                    </span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-6">
                        <a href="#" class="text-white/80 hover:text-white px-3 py-2">Paper</a>
                        <a href="#" class="text-white/80 hover:text-white px-3 py-2">GitHub</a>
                        <a href="https://huggingface.co/spaces/yyfz233/Pi3" class="text-white/80 hover:text-white px-3 py-2">Demo</a>

                        <div class="relative group">
                            <button class="text-white/80 hover:text-white px-3 py-2 focus:outline-none">
                                More Works
                                <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            
                            <div class="absolute hidden group-hover:block pt-2 left-1/2 -translate-x-1/2 max-w-[calc(100vw-20px)]">
                                <div class="bg-white rounded-lg shadow-lg py-2 w-[max-content] min-w-[200px] max-w-full overflow-x-auto">
                                    <div class="px-2"> 
                                        <a href="https://sotamak1r.github.io/deepverse/" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 whitespace-nowrap">DeepVerse</a>
                                    </div>
                                    <div class="px-2"> 
                                        <a href="https://aether-world.github.io/" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 whitespace-nowrap">Aether</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    


    <div class="gradient-bg min-h-screen flex items-center pt-20">
        <video autoplay loop muted playsinline class="background-video">
            <source src="assets/videos/teaser.mp4" type="video/mp4">
        </video>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
            <div class="text-center">
                <p class="text-white mb-12 max-w-3xl mx-auto" style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                    text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    Scalable Permutation-Equivariant Visual Geometry Learning
                </p>
                <br>
                <div class="text-gray-700 mb-10 max-w-2xl mx-auto space-y-2">
                    <div class="text-lg font-medium">
                        <span class="text-black">
                            <a href="#">TBD</a>
                        </span> 
                        <br>
                        <span class="text-sm">
                            <sup>1</sup>TBD
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-16">
            <div class="mb-16 text-center">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    Key Capabilities
                </h2>
            </div>
            <div class="grid md:grid-cols-3 gap-12" style="font-family: 'Orbitron', sans-serif;">
                <div class="hover-3d p-8 rounded-xl shadow-lg" style="background-color: #f0f9ff;">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z" />
                        </svg>                          
                    </div>
                    <h3 class="text-xl font-semibold mb-4">Permutation-Equivariant</h3>
                    <p class="text-gray-400">
                        TBD
                    </p>
                </div>
                <div class="hover-3d p-8 rounded-xl shadow-lg" style="background-color: #f0f9ff;">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4">SOTA Performance</h3>
                    <p class="text-gray-400">
                        TBD
                    </p>
                </div>
                <div class="hover-3d p-8 rounded-xl shadow-lg" style="background-color: #f0f9ff;">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4">Robust & Efficient</h3>
                    <p class="text-gray-400">
                        TBD
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    Permutation-Equivariant
                </h2>
            </div>
        </div>
    </div>

    <div class="py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    SOTA Performance
                </h2>
                <br>
                <img src="./assets/images/depth_est.jpg" class="w-full h-auto rounded-xl shadow-lg object-cover">
            </div>
        </div>        
    </div>

    <div class="py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    Interactive Point Cloud Visualization
                </h2>
                <p class="text-gray-400 mt-4 max-w-2xl mx-auto">
                    Select a video, then a keyframe, and finally choose a point cloud to visualize.
                </p>
            </div>

            <div id="video-row" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <div class="cursor-pointer rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300" data-video-id="1">
                    <video autoplay loop muted playsinline class="w-full h-auto">
                        <source src="assets/videos/castle.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="cursor-pointer rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300" data-video-id="2">
                    <video autoplay loop muted playsinline class="w-full h-auto">
                        <source src="assets/videos/castle.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="cursor-pointer rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300" data-video-id="3">
                    <video autoplay loop muted playsinline class="w-full h-auto">
                        <source src="assets/videos/castle.mp4" type="video/mp4">
                    </video>
                </div>
            </div>

            <div id="keyframe-row" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8">
                </div>

            <div id="point-cloud-buttons" class="flex justify-center gap-4 mb-8" style="display: none;">
                </div>

            <div id="point-cloud-container" class="w-full h-[500px] bg-gray-900 rounded-lg shadow-lg relative" style="display: none;">
                 <div id="loader" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white">Select a video and keyframe above.</div>
            </div>
        </div>
    </div>

    <div class="py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 2.4em !important; font-weight: 900;
                text-align: center; color: #f0e9e9 !important; animation: text-glow 4s ease-in-out infinite; margin-bottom: 0px;">
                    Robust & Efficient
                </h2>
            </div>
        </div>        
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const groups = ['1', '2', '3', '4', '5', '6', '7', '8', '1_w', '2_w', '3_w'];
            
            groups.forEach(groupId => {
                const videos = document.querySelectorAll(`[data-video-group="${groupId}"] video`);
                let loadedCount = 0;
        
                const playGroup = () => {
                    videos.forEach(video => video.play());
                };

                videos.forEach(video => {
                    
                    const handleCanPlay = () => {
                        loadedCount++;
                        if (loadedCount === videos.length) {
                            playGroup();
                            video.removeEventListener('canplaythrough', handleCanPlay);
                        }
                    };
        
                    if (video.readyState >= 4) {
                        loadedCount++;
                        if (loadedCount === videos.length) playGroup();
                    } else {
                        video.addEventListener('canplaythrough', handleCanPlay);
                    }
                });
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoRow = document.getElementById('video-row');
            const keyframeRow = document.getElementById('keyframe-row');
            const pointCloudContainer = document.getElementById('point-cloud-container');
            const p_loader = document.getElementById('loader');
            const pointCloudButtons = document.getElementById('point-cloud-buttons');


            // --- IMPORTANT: UPDATE YOUR FILE PATHS HERE ---
            const videoData = {
                '1': {
                    keyframes: [
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                    ]
                },
                '2': {
                    keyframes: [
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                    ]
                },
                '3': {
                    keyframes: [
                        { img: './assets/images/depth_est.jpg', plys: ['./assets/pointclouds/111.ply', './assets/pointclouds/111.ply', './assets/pointclouds/111.ply'] },
                        { img: 'path/to/your/video3_keyframe2.jpg', plys: ['path/to/your/pc3_kf2_v1.ply', 'path/to/your/pc3_kf2_v2.ply', 'path/to/your/pc3_kf2_v3.ply'] },
                        { img: 'path/to/your/video3_keyframe3.jpg', plys: ['path/to/your/pc3_kf3_v1.ply', 'path/to/your/pc3_kf3_v2.ply', 'path/to/your/pc3_kf3_v3.ply'] }
                    ]
                }
            };

            let scene, camera, renderer, controls;

            function initThreeJS() {
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, pointCloudContainer.clientWidth / pointCloudContainer.clientHeight, 0.1, 1000);
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(pointCloudContainer.clientWidth, pointCloudContainer.clientHeight);
                pointCloudContainer.appendChild(renderer.domElement);

                controls = new THREE.OrbitControls(camera, renderer.domElement);
                camera.position.z = 5;

                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                directionalLight.position.set(0, 1, 0);
                scene.add(directionalLight);

                animate();
            }

            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }

            function loadPointCloud(plyPath) {
                if (scene) {
                    while(scene.children.length > 0){ 
                        scene.remove(scene.children[0]); 
                    }
                }

                const plyLoader = new THREE.PLYLoader();
                p_loader.style.display = 'block';
                p_loader.innerText = 'Loading...';

                plyLoader.load(plyPath, function (geometry) {
                    geometry.computeVertexNormals();
                    const material = new THREE.PointsMaterial({ size: 0.01, vertexColors: true });
                    const points = new THREE.Points(geometry, material);
                    scene.add(points);
                    p_loader.style.display = 'none';
                }, undefined, function (error) {
                    console.error('An error happened during PLY loading:', error);
                    p_loader.innerText = 'Error loading point cloud.';
                });
            }


            videoRow.addEventListener('click', function(e) {
                const videoWrapper = e.target.closest('[data-video-id]');
                if (videoWrapper) {
                    const videoId = videoWrapper.dataset.videoId;
                    const data = videoData[videoId];
                    
                    keyframeRow.innerHTML = '';
                    pointCloudButtons.innerHTML = '';
                    pointCloudButtons.style.display = 'none';

                    if (data && data.keyframes) {
                        data.keyframes.forEach(frame => {
                            const keyframeElement = document.createElement('div');
                            keyframeElement.className = 'cursor-pointer rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300';
                            keyframeElement.innerHTML = `<img src="${frame.img}" alt="Keyframe" class="w-full h-auto">`;
                            
                            keyframeElement.addEventListener('click', () => {
                                pointCloudContainer.style.display = 'block';
                                p_loader.innerText = 'Please select a point cloud version.';
                                p_loader.style.display = 'block';
                                
                                if (!renderer) {
                                    initThreeJS();
                                }

                                pointCloudButtons.style.display = 'flex';
                                pointCloudButtons.innerHTML = ''; 

                                if (frame.plys) {
                                    frame.plys.forEach((plyPath, index) => {
                                        const button = document.createElement('button');
                                        button.className = 'px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500';
                                        button.innerText = `Point Cloud ${index + 1}`;
                                        button.addEventListener('click', () => {
                                            loadPointCloud(plyPath);
                                        });
                                        pointCloudButtons.appendChild(button);
                                    });
                                }
                            });
                            keyframeRow.appendChild(keyframeElement);
                        });
                    }
                }
            });
        });
    </script>
    <footer class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center text-gray-200">
                Website source based on <a href="https://sotamak1r.github.io/deepverse/">DeepVerse</a>. We also incorporated design elements from <a href="https://aether-world.github.io/">Aether</a>.
            </div>
        </div>
    </footer>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                }
            });
        }, {
            threshold: 0.1
        });

        document.querySelectorAll('.hover-3d').forEach((el) => observer.observe(el));

        document.addEventListener('DOMContentLoaded', () => {
            const nav = document.getElementById('main-nav');
            let lastScroll = 0;

            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                 
                if (currentScroll > 50) {
                    nav.classList.add('bg-white', 'shadow-md', 'backdrop-blur-md');
                    nav.classList.remove('bg-transparent');
                    nav.querySelector('span').classList.replace('text-white', 'text-gray-900');
                    nav.querySelectorAll('a').forEach(link => {
                        link.classList.replace('text-white/80', 'text-gray-600');
                    });
                    nav.querySelectorAll('button').forEach(link => {
                        link.classList.replace('text-white/80', 'text-gray-600');
                    });
                } else {
                    nav.classList.remove('bg-white', 'shadow-md', 'backdrop-blur-md');
                    nav.classList.add('bg-transparent');
                    nav.querySelector('span').classList.replace('text-gray-900', 'text-white');
                    nav.querySelectorAll('a').forEach(link => {
                        link.classList.replace('text-gray-600', 'text-white/80');
                    });
                    nav.querySelectorAll('button').forEach(link => {
                        link.classList.replace('text-gray-600', 'text-white/80');
                    });
                }
                
                lastScroll = currentScroll;
            });
        });
    </script>
</body>
</html>